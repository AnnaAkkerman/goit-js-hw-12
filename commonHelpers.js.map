{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__3108d0c6__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport errorIcon from '../src/img/bi_x-octagon.svg';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst list = document.querySelector('.gallery');\n\nsearchForm.addEventListener('submit', handleSubmit);\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction handleSubmit(e) {\n  e.preventDefault();\n\n  const value = e.target.elements.search.value;\n  const hasLoader = document.querySelector('.loader');\n\n  if (value !== '' && !hasLoader) {\n    list.innerHTML = '';\n\n    searchForm.insertAdjacentHTML('afterend', '<span class=\"loader\"></span>');\n\n    getPictures(value).then(data => {\n      setTimeout(() => {\n        const spanLoader = document.querySelector('.loader');\n        if (spanLoader) {\n          spanLoader.remove();\n        }\n        renderImages(data.hits);\n      }, 500);\n    });\n  }\n  searchForm.reset();\n}\n\nfunction getPictures(value) {\n  const searchParams = new URLSearchParams({\n    key: '42121827-736028e2edd071afefc989558',\n    q: `${value}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 100,\n  });\n  const url = `https://pixabay.com/api/?${searchParams}`;\n\n  return fetch(url)\n    .then(res => {\n      if (!res.ok) {\n        throw new Error(`HTTP error! Status: ${res.status}`);\n      }\n      return res.json();\n    })\n    .catch(error => {\n      throw error;\n    });\n}\n\nfunction renderImages(arr) {\n  if (arr.length === 0) {\n    return iziToast.show({\n      message: `Sorry, there are no images matching<br>your search query. Please try again!`,\n      messageColor: 'rgba(255, 255, 255, 1)',\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      iconUrl: errorIcon,\n      position: 'topRight',\n    });\n  }\n  const markup = imageTemplate(arr);\n  list.insertAdjacentHTML('beforeend', markup);\n  gallery.on('show.simplelightbox');\n  gallery.refresh();\n}\n\nfunction imageTemplate(arr) {\n  return arr\n    .map(\n      arr =>\n        `<li class=\"gallery-item\">\n            <div class=\"image-container\">\n                <a href=\"${arr.largeImageURL}\"><img src=\"${arr.webformatURL}\" alt=\"${arr.tags}\" class=\"gallery-image\"></a>\n            </div>\n            <div class=\"gallery-card\">\n                <p><span class=\"description\">Likes</span>${arr.likes}</p>\n                <p><span class=\"description\">Views</span>${arr.views}</p>\n                <p><span class=\"description\">Comments</span>${arr.comments}</p>\n                <p><span class=\"description\">Downloads</span>${arr.downloads}</p>\n            </div>\n        </li>`\n    )\n    .join('');\n}\n"],"names":["errorIcon","searchForm","list","handleSubmit","gallery","SimpleLightbox","e","value","hasLoader","getPictures","data","spanLoader","renderImages","url","res","error","arr","iziToast","markup","imageTemplate"],"mappings":"6vBAAA,MAAeA,EAAA,kDCMTC,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAO,SAAS,cAAc,UAAU,EAE9CD,EAAW,iBAAiB,SAAUE,CAAY,EAElD,MAAMC,EAAU,IAAIC,EAAe,aAAc,CAC/C,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASF,EAAaG,EAAG,CACvBA,EAAE,eAAc,EAEhB,MAAMC,EAAQD,EAAE,OAAO,SAAS,OAAO,MACjCE,EAAY,SAAS,cAAc,SAAS,EAE9CD,IAAU,IAAM,CAACC,IACnBN,EAAK,UAAY,GAEjBD,EAAW,mBAAmB,WAAY,8BAA8B,EAExEQ,EAAYF,CAAK,EAAE,KAAKG,GAAQ,CAC9B,WAAW,IAAM,CACf,MAAMC,EAAa,SAAS,cAAc,SAAS,EAC/CA,GACFA,EAAW,OAAM,EAEnBC,EAAaF,EAAK,IAAI,CACvB,EAAE,GAAG,CACZ,CAAK,GAEHT,EAAW,MAAK,CAClB,CAEA,SAASQ,EAAYF,EAAO,CAS1B,MAAMM,EAAM,4BARS,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAG,GAAGN,IACN,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACd,CAAG,IAGD,OAAO,MAAMM,CAAG,EACb,KAAKC,GAAO,CACX,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAM,uBAAuBA,EAAI,QAAQ,EAErD,OAAOA,EAAI,MACjB,CAAK,EACA,MAAMC,GAAS,CACd,MAAMA,CACZ,CAAK,CACL,CAEA,SAASH,EAAaI,EAAK,CACzB,GAAIA,EAAI,SAAW,EACjB,OAAOC,EAAS,KAAK,CACnB,QAAS,8EACT,aAAc,yBACd,gBAAiB,uBACjB,QAASjB,EACT,SAAU,UAChB,CAAK,EAEH,MAAMkB,EAASC,EAAcH,CAAG,EAChCd,EAAK,mBAAmB,YAAagB,CAAM,EAC3Cd,EAAQ,GAAG,qBAAqB,EAChCA,EAAQ,QAAO,CACjB,CAEA,SAASe,EAAcH,EAAK,CAC1B,OAAOA,EACJ,IACCA,GACE;AAAA;AAAA,2BAEmBA,EAAI,4BAA4BA,EAAI,sBAAsBA,EAAI;AAAA;AAAA;AAAA,2DAG9BA,EAAI;AAAA,2DACJA,EAAI;AAAA,8DACDA,EAAI;AAAA,+DACHA,EAAI;AAAA;AAAA,cAG9D,EACA,KAAK,EAAE,CACZ"}